<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Integrating a New Application (Package Pro) Tutorial - My Docs</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">My Docs</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../.." class="nav-link">Welcome to MkDocs</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../A%20Crash%20Course%20in%20DNS%20%28Domain%20Name%20System%29/" class="nav-link">A Crash Course in DNS (Domain Name System)</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Training Portal</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="./" class="dropdown-item active" aria-current="page">Integrating a New Application (Package Pro) Tutorial</a>
</li>
                                    
<li>
    <a href="../Technical-Setup/" class="dropdown-item">Training Portal Technical Setup &amp; Configuration</a>
</li>
                                    
<li>
    <a href="../implementation_plan_authentication%20and%20leaderboard/" class="dropdown-item">Implementation Plan: User Tracking &amp; Leaderboard</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../../A%20Crash%20Course%20in%20DNS%20%28Domain%20Name%20System%29/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../Technical-Setup/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#integrating-a-new-application-package-pro-tutorial" class="nav-link">Integrating a New Application (Package Pro) Tutorial</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#chapter-1-the-frontend-static-files" class="nav-link">Chapter 1: The Frontend (Static Files)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#chapter-2-the-database-app-entity" class="nav-link">Chapter 2: The Database "App" Entity</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#chapter-3-running-migrations" class="nav-link">Chapter 3: Running Migrations</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#chapter-4-seeding-the-data-the-tricky-part" class="nav-link">Chapter 4: Seeding The Data (The Tricky Part!)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#chapter-5-fixing-the-easyadmin-dashboard-error" class="nav-link">Chapter 5: Fixing the EasyAdmin Dashboard Error</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#summary" class="nav-link">Summary</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="integrating-a-new-application-package-pro-tutorial">Integrating a New Application (Package Pro) Tutorial</h1>
<p>This tutorial explains step-by-step how we integrated "Package Pro" into the Training Portal. The goal is for you to understand the <em>why</em> and <em>how</em> behind each change, from the frontend static files all the way to the Symfony backend database and EasyAdmin dashboard.</p>
<p>Whether you replicate this for another app or just want to understand the codebase better, these chapters will guide you through the process we used.</p>
<hr />
<h2 id="chapter-1-the-frontend-static-files">Chapter 1: The Frontend (Static Files)</h2>
<p><strong>What we did:</strong> We copied the <code>package-pro</code> folder into the <code>public/</code> directory of the Symfony project.</p>
<p><strong>Why:</strong> The Training Portal is designed with a decoupled architecture. The "games" (DNS Detective, Package Pro) are standalone static applications written in raw HTML, CSS, and JS. Symfony does not use Twig to render their inner logic. By placing the folder in <code>public/package-pro</code>, the web server (or the Symfony local server) serves those static files directly at <code>http://localhost:8000/package-pro/</code>. </p>
<p>This keeps the frontend completely isolated. Symfony's main job is simply tracking <em>progress</em> and serving as an admin interface to manage the data.</p>
<hr />
<h2 id="chapter-2-the-database-app-entity">Chapter 2: The Database "App" Entity</h2>
<p>To make Package Pro show up in the EasyAdmin dashboard (the portal backend), we needed to tell the database that this app exists. The blueprint for database tables in Symfony is an <strong>Entity</strong>.</p>
<h3 id="adding-missing-fields">Adding Missing Fields</h3>
<p><strong>What we did:</strong> We modified <code>src/Entity/App.php</code>. We noticed that when we tried to seed the database, properties like <code>description</code>, <code>icon</code>, <code>colorTheme</code>, and <code>isActive</code> were missing, causing a fatal PHP error.</p>
<p><strong>Why:</strong> In Doctrine (Symfony's database ORM tool), PHP class properties mapped with <code>#[ORM\Column]</code> attributes define the actual table columns.
We added:</p>
<pre><code class="language-php">#[ORM\Column(type: 'text', nullable: true)]
public ?string $description = null;

#[ORM\Column(length: 50, nullable: true)]
public ?string $icon = null;

#[ORM\Column(length: 50, nullable: true)]
public ?string $colorTheme = null;

#[ORM\Column(type: 'boolean', options: ['default' =&gt; true])]
public bool $isActive = true;
</code></pre>
<p><em>Note on <code>isActive</code>:</em> We initially forgot the <code>options: ['default' =&gt; true]</code>. Because the database <em>already had data</em> (the DNS Detective row), adding a <code>NOT NULL</code> boolean column (<code>bool $isActive</code> without a <code>?</code>) made SQLite/Database complain: "Cannot add a NOT NULL column without a default value." We fixed that by providing the default value directly in the ORM attribute.</p>
<hr />
<h2 id="chapter-3-running-migrations">Chapter 3: Running Migrations</h2>
<p><strong>What we did:</strong> We ran <code>php bin/console make:migration</code> and then <code>php bin/console doctrine:migrations:migrate</code>.</p>
<p><strong>Why:</strong> Editing an Entity file in PHP does not automatically change the database.
1. <code>make:migration</code> compares your PHP files to your current database schema and generates a raw SQL file (<code>VersionXXXX.php</code> in the <code>migrations/</code> folder) containing the <code>ALTER TABLE</code> commands needed to bridge the gap.
2. <code>doctrine:migrations:migrate</code> safely executes that SQL file. This ensures the database stays perfectly synced with your code.</p>
<hr />
<h2 id="chapter-4-seeding-the-data-the-tricky-part">Chapter 4: Seeding The Data (The Tricky Part!)</h2>
<p>To create the initial data, we wrote a PHP script: <code>bin/seed_package_pro.php</code>.</p>
<h3 id="step-41-the-app-table">Step 4.1: The <code>App</code> Table</h3>
<p><strong>What we did:</strong> We created a new instance of the <code>App</code> entity and assigned it the values for Package Pro.</p>
<pre><code class="language-php">$app = new App();
$app-&gt;name = 'Package Pro';
$app-&gt;slug = 'package-pro';
// ... set description, icon, etc.
$em-&gt;persist($app);
</code></pre>
<p><strong>Why:</strong> <code>$em</code> is the <code>EntityManager</code>. Calling <code>persist()</code> tells Doctrine "start tracking this object". Calling <code>flush()</code> actually writes it to the database with an <code>INSERT</code> statement.</p>
<h3 id="step-42-realizing-we-forgot-the-cases">Step 4.2: Realizing We Forgot the Cases!</h3>
<p>Initially, we stopped there. Package Pro showed up on the EasyAdmin dashboard... but it was completely empty inside. It had no "Course Cases" or "Quiz Questions". We hadn't seeded them!</p>
<h3 id="step-43-extracting-data-from-javascript">Step 4.3: Extracting Data from Javascript</h3>
<p><strong>What we did:</strong> The <code>app.js</code> file for Package Pro contained a massive <code>CASES</code> Javascript object storing all the scenario text, questions, and answers. Typing them out by hand in PHP would be terrible.
Instead, we:
1. Wrote a quick Node.js script to extract the <code>CASES</code> block from <code>app.js</code> and save it as a JSON file (<code>/tmp/package_pro_cases.json</code>).
2. Updated our PHP seed script to <code>file_get_contents()</code> and <code>json_decode()</code> that JSON back into a PHP array.
3. Created <code>CourseCase</code>, <code>Step</code>, and <code>Question</code> entities in a loop for every case we found.</p>
<pre><code class="language-php">foreach ($casesData as $data) {
    // 1. Create the Course Case
    $case = new CourseCase();
    $case-&gt;app = $app; // Link it back to the main App!
    $case-&gt;title = $data['title'];
    $em-&gt;persist($case);

    // 2. Loop through steps in the case
    foreach ($data['steps'] as $stepData) {
        $step = new Step();
        $step-&gt;courseCase = $case; // Link it back to the Case
        // ... set step properties
        $em-&gt;persist($step);

        // 3. Loop through quiz questions in the step
        foreach ($stepData['questions'] as $qData) {
            $q = new Question();
            $q-&gt;step = $step; // Link it back to the Step
            // ... set question properties
            $em-&gt;persist($q);
        }
    }
}
$em-&gt;flush(); // Commit all 150+ rows to the database at once!
</code></pre>
<p><strong>Why:</strong> A relational database requires these connections. An <code>App</code> One-to-Many <code>CourseCases</code>. A <code>CourseCase</code> One-to-Many <code>Steps</code>. And a <code>Step</code> One-to-Many <code>Questions</code>. Setting these properties effectively creates the Foreign Key relationships.</p>
<hr />
<h2 id="chapter-5-fixing-the-easyadmin-dashboard-error">Chapter 5: Fixing the EasyAdmin Dashboard Error</h2>
<p><strong>What we did:</strong> Early on, when you tried to load <code>/admin</code>, EasyAdmin threw a fatal runtime error: <code>"Call to undefined method MenuItem::linkToCrud()"</code>. We fixed this in <code>DashboardController.php</code>.</p>
<p><strong>Why:</strong> The code you had earlier was for EasyAdmin version 3.x. However, the project's <code>composer.json</code> specified <code>"easycorp/easyadmin-bundle": "*"</code>, which installed the newest Version 4.x. </p>
<p>In EasyAdmin 4, <code>MenuItem::linkToCrud()</code> was deleted. Replacing it was easy:</p>
<pre><code class="language-diff">- yield MenuItem::linkToCrud('Apps', 'fa fa-graduation-cap', App::class);
+ yield MenuItem::linkTo(AppCrudController::class, 'Apps', 'fa fa-graduation-cap');
</code></pre>
<p>You now pass the fully qualified class name of the <em>Controller</em> rather than the <em>Entity</em>, using the newer <code>linkTo()</code> method.</p>
<hr />
<h2 id="summary">Summary</h2>
<p>You now have a complete, working knowledge of the data pipeline for your portal!
1. <strong>Frontend:</strong> Static HTML/JS in <code>public/{app-name}</code>
2. <strong>Backend Structure:</strong> <code>src/Entity/{Name}.php</code> models the tables.
3. <strong>Database Changes:</strong> <code>make:migration</code> -&gt; <code>migrate</code>
4. <strong>Data Population:</strong> Custom <code>bin/seed_{app}.php</code> scripts to parse text/JSON and <code>persist()</code> objects.
5. <strong>Dashboard UI:</strong> EasyAdmin <code>...CrudController.php</code> files automatically render grids based on the database data!</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
